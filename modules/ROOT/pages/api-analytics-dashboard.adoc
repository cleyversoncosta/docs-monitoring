= API Analytics Dashboards

The API analytics dashboards provide charts to monitor API usage, which gives you insight into how your APIs are used and how they are performing.

There are two views for API analytics dashboard: new metrics and classic metrics.
The new metrics view includes detailed information about your APIs, and charts are sorted into dashboards based on the type of data displayed.
The classic metrics view is deprecated as of January 15, 2020, and it displays information related only to response times and requests for APIs.
To get the most out of Anypoint Monitoring, you should use the new metrics view to see information related to your APIs.

By default, the new metrics view is selected. To switch views, select *Switch to classic metrics*. From the classic metrics view, select *Show new metrics view*.

[NOTE]
For Gold and Platinum subscriptions to Anypoint Monitoring, API analytics data are retained for 90 days.

== View the API Analytics Dashboard

. Sign into Anypoint Platform and navigate to *Anypoint Monitoring*.
. Select the Environment, Resource name, and Version/Instance for the API to view.
. Click *View*. +
The API analytics page is displayed, where you can view information about a running, managed API. +
image::monitoring-api-analytics-top.png[]
+
image::monitoring-api-analytics-bottom.png[]
+
. Select the date and time range you want to view statistics for and click *Confirm*. +
The details panel at the top of the page displays information about the API.
+
image::api-analytics-detail-panel.png[]
+
You can click the *View API in API Manager* link to view API analytics in API Manager.

== New Metrics View for API Analytics Dashboards

API analytics dashboards include various pages to view different types of charts:

[%header,cols="1,4"]
|===
| API Analytics Dashboards | Charts

| *Overview* a|

* Request Volume
* Failed Requests
* Policy Violations
* Average Response Time

| *Requests* a|

* Requests
* Requests by Method
* Requests by Response Code
* Requests by Request Size
* Requests by Response Size

| *Policies* a|

* Requests
* Policy Violations by Outcome
* Policy Violations by Violation ID

| *Failures* a|

* Failures
* Failures by Method
* Requests by Response Code
* Requests by Request Size
* Requests by Response Size

| *Performance* a|

* Requests by Performance (line chart)
* Requests by Performance (table)
* Slow Requests (requires Titanium)

| *Client Applications* a|

* Requests by Client ID
* Requests by Client IP
* Requests by Country
* Requests by State/Province

|===

=== Overview Charts

The charts on the *Overview* dashboard are defined as follows:

Request Volume:: The sum of requests in the chosen time period for the given API.

Failed Requests:: The sum of failed requests in the chosen time period for the given API.

Policy Violations:: The sum of requests for policy violations in the chosen time period, grouped by policy violation ID.

Average Response Time:: The average response time of requests in the chosen time period for the given API.

=== Requests Charts

The charts in the *Requests* dashboard are defined as follows:

Requests:: The sum of requests in the chosen time period, grouped by the top 100 paths.

Requests by Method:: The sum of requests in the chosen time period, grouped by method.

Requests by Response Code:: The sum of requests in the chosen time period, grouped by response code.

Requests by Request Size:: The sum of requests in the chosen time period, grouped by request size.+

Requests by Response Size:: The sum of requests in the chosen time period, grouped by response size.+

=== Policies Charts

The charts in the *Policies* dashboard are defined as follows:

Requests:: The sum of requests of policy violations in the chosen time period, grouped by top N paths.

// should N be 100? or is this undecided?

Policy Violations by Outcome:: The sum of requests of policy violations in the chosen time period, grouped by outcome.

Policy Violations by Violation ID:: The sum of requests of policy violations in the chosen time period, grouped by policy violation ID.

=== Failures Charts

The charts in the *Failures* dashboard are defined as follows:

Failures:: The sum of failed requests in the chosen time period, grouped by the top 100 paths.

Failures by Method:: The sum of failed requests in the chosen time period, grouped by method.

Requests by Response Code:: The sum of failed requests in the chosen time period, grouped by response code.

Requests by Request Size:: The sum of failed requests in the chosen time period, grouped by request size.

Requests by Response Size:: The sum of failed requests in the chosen time period, grouped by response size

=== Performance Charts

The charts in the *Performance* dashboard are defined as follows:

Requests by Performance (line chart):: The average response times to requests, grouped by path.

Requests by Performance (table):: The average response times to requests, grouped by path.

Slow Requests:: The average response times that are greater than 1 second, grouped by path. This chart is available only for Titanium users.

=== Client Applications Charts

The charts in the *Client Applications* dashboard are defined as follows:

Requests by Client ID:: The sum of requests in the period, grouped by client ID.

Requests by Client IP:: The sum of requests in the period, grouped by client IP.

Requests by Country:: The sum of requests in the chosen time period, grouped by country.

Requests by State/Province:: The sum of requests in the chosen time period, grouped by state/province.

== Classic Metrics View (Deprecated)

The classic metrics view is deprecated as of January 15, 2020.

The following charts are available in the *Overview* section of built-in dashboards for APIs:

* Requests
* Requests by HTTP response code
* Requests by method
* Requests (Avg), Average Size of Requests, and Average Size of Responses
* Requests by HTTP policy violation
* Requests by failure

=== Requests

You can view the metrics for how many times the particular instance of this API was requested over the specified period of time. Hover over the graph to display data in a more granular view.

image::api-request-by-instance.png[]

=== Requests by HTTP Response Code

Displays data about the API instance's total number of requests by HTTP response code for the time period you specified, including:

* Status Code - HTTP response code for the API call.
* Sum - Total number of requests with the corresponding response code.

Click the column header to sort data for that column.

image::api-requests-by-http-response.png[]

=== Requests by Method

Displays metrics about the API's requests by method, including:

* Method - The method used to call the API.
* Avg - The average of all the non-null values in the series.
* Min - The smallest value in the series.
* Max - The largest value in the series.
* Total - The sum of all values in the series.

Click the column header to sort data for that column.

image::api-request-by-method.png[]

=== Requests, Average Size of Requests, and Average Size of Responses

Displays metrics according to the API's request and response sizes:

* Requests (Avg) - Average number of requests
* Average Size of Requests - Average size of requests (bytes)
* Average Size of Responses - Average size of responses (bytes)

image::api-request-by-request-and-response-size.png[]

=== Requests by HTTP Policy Violation

Displays metrics for traffic that was rejected or not rejected for the specified policy, including:

* Policy - The name of the policy applied to the API instance.
* Avg - The average of all the non-null values in the series.
* Min - The smallest value in the series.
* Max - The largest value in the series.
* Total - The sum of all values in the series.

Click the column header to sort data for that column.

image::api-request-by-http-policy-violation.png[]


=== Requests by Failures

Displays information about failed requests to the API, including:

* Error code - The HTTP error code corresponding the failure type.
* Avg - The average of all the non-null values in the series.
* Min - The smallest value in the series.
* Max - The largest value in the series.
* Total - The sum of all values in the series.

Click the column header to sort data for that column.


image::api-request-by-failure.png[]
